<?php
// Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
$successMessage = "";
$errorMessage = "";

if ($_SERVER["REQUEST_METHOD"] === "POST" && isset($_POST["note"])) {
  $message = trim($_POST["note"]);

  if (!empty($message)) {
    $to = "specialist@example.com"; 
    $subject = "Ø±Ø³Ø§Ù„Ø© Ø¬Ø¯ÙŠØ¯Ø© Ù…Ù† ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠ";
    $body = "Ø§Ù„Ù…Ø­ØªÙˆÙ‰:\n\n" . $message;
    $headers = "From: no-reply@digitalsafe.org";

    if (mail($to, $subject, $body, $headers)) {
      $successMessage = "âœ… ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ø³Ø§Ù„ØªÙƒ Ø¨Ø£Ù…Ø§Ù† Ø¥Ù„Ù‰ Ù…Ø®ØªØµ.";
    } else {
      $errorMessage = "âš ï¸ Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.";
    }
  } else {
    $errorMessage = "âš ï¸ Ù…Ù† ÙØ¶Ù„Ùƒ Ø§ÙƒØªØ¨ Ø´ÙŠØ¦Ù‹Ø§ Ù‚Ø¨Ù„ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„.";
  }
}
?>
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body { background:#f2f7f5; font-family:Tahoma; margin:0; padding:20px; color:#333; }
    .container { max-width:700px; margin:auto; background:#fff; padding:30px; border-radius:15px;
      box-shadow:0 0 15px rgba(0,0,0,0.1);}
    h1{text-align:center;color:#5c6bc0;}

    textarea{
      width:100%; height:180px; padding:10px; border-radius:10px; border:1px solid #ddd;
      resize:none; background:#f9f9f9; font-size:16px;
    }

    button{
      width:100%; padding:12px; margin-top:15px; font-size:16px; border:none; border-radius:10px;
      cursor:pointer; transition:.3s;
    }
    .save-btn{background:#a8dadc;color:#1d3557}
    .message-btn{background:#ffd6a5;color:#5f370e}
    .send-btn{background:#c8e6c9;color:#1b5e20}
    .exit-btn{background:#ffb5a7;color:#4a0f0f}
    .clear-btn{background:#e0e0e0;color:#000}

    button:hover{opacity:.9; transform:scale(1.02);}

    .support-message{
      margin-top:15px;background:#e8f0fe;padding:15px;border-radius:8px;display:none;
      text-align:center;font-weight:bold;
    }

    /* ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø³Ø¨ÙˆØ±Ø© */
    #drawingBox{
      display:none;
      margin-top:30px;
      background:#f9f9f9;
      padding:20px;
      border-radius:12px;
      border:1px solid #ddd;
    }

    canvas{
      width:100%;
      height:300px;
      background:white;
      border:1px solid #aaa;
      border-radius:10px;
      margin-top:10px;
    }

    .info,.about{margin-top:30px; padding:20px; border-radius:10px;}
    .info{background:#f1f1f1}
    .about{background:#fff3e0}
    footer{text-align:center;margin-top:20px;font-size:14px;color:#777;}
  </style>
</head>

<body>

<div class="container">

  <h1>ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠ</h1>

  <?php if ($successMessage): ?>
      <div class="success" style="background:#d4edda;padding:12px;border-radius:8px;text-align:center;">
        <?= $successMessage ?>
      </div>
  <?php elseif ($errorMessage): ?>
      <div class="error" style="background:#f8d7da;padding:12px;border-radius:8px;text-align:center;">
        <?= $errorMessage ?>
      </div>
  <?php endif; ?>

  <form method="post">

    <!-- ÙƒØªØ§Ø¨Ø© Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø© -->
    <textarea id="note" name="note" placeholder="Ø§ÙƒØªØ¨ Ù…Ø´Ø§Ø¹Ø±Ùƒ Ù‡Ù†Ø§..."></textarea>

    <!-- Ø£Ø²Ø±Ø§Ø± -->
    <button type="button" class="save-btn" onclick="saveNote()">ğŸ’¾ Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©</button>
    <button type="button" class="message-btn" onclick="showMessage()">ğŸ’¬ ÙƒÙ„Ù…Ø© Ø¯Ø¹Ù…</button>
    <button type="submit" class="send-btn">ğŸ“¨ Ø¥Ø±Ø³Ø§Ù„ Ù„Ù„Ù…Ø®ØªØµ</button>
    <button type="button" class="exit-btn" onclick="quickExit()">ğŸšª Ø®Ø±ÙˆØ¬ Ø³Ø±ÙŠØ¹</button>

  </form>

  <div id="supportMessage" class="support-message"></div>

  <!-- Ø§Ù„Ø³Ø¨ÙˆØ±Ø© -->
  <div id="drawingBox">
    <h3 style="color:#5c6bc0;">ğŸ¨ (Ø´Ø¬Ø±Ø© ,Ø¨ÙŠØª, Ø´Ø®Øµ)  Ø§Ø±Ø³Ù… Ù…Ø§ ØªØ´Ø¹Ø± Ø¨Ù‡</h3>
    <canvas id="drawingBoard"></canvas>
    <button class="clear-btn" onclick="clearCanvas()">ğŸ§½ Ù…Ø³Ø­ Ø§Ù„Ø³Ø¨ÙˆØ±Ø©</button>
  </div>

  <!-- Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù‡Ù…Ø© -->
  <div class="info">
    <h3>Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ù…Ù‡Ù…Ø©:</h3>
    <ul>
      <li>ğŸ“ Ø®Ø· Ù†Ø¬Ø¯Ø© Ø§Ù„Ø·ÙÙ„: 16000</li>
      <li>ğŸš¨ Ø§Ù„Ø´Ø±Ø·Ø©: 122</li>
      <li>ğŸ‘©â€ğŸ¦° ÙˆØ­Ø¯Ø© Ù…Ù†Ø§Ù‡Ø¶Ø© Ø§Ù„Ø¹Ù†Ù Ø¶Ø¯ Ø§Ù„Ù…Ø±Ø£Ø©: 15115</li>
    </ul>
  </div>

  <footer><p>Â© 2025 ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø£Ù…Ø§Ù† Ø§Ù„Ø±Ù‚Ù…ÙŠ</p></footer>

</div>

<script>
  // Ø­ÙØ¸ Ø§Ù„Ù…Ù„Ø§Ø­Ø¸Ø©
  function saveNote(){
    let note=document.getElementById("note").value;
    if(note.trim()!==""){
      localStorage.setItem("mySafeNote", note);
      alert("ØªÙ… Ø§Ù„Ø§Ø±Ø³Ø§Ù„ Ø¥Ù„Ù‰ Ù…Ø®ØªØµ, Ø´ÙƒØ±Ø§ Ù„Ø«Ù‚ØªÙƒÙ….");
    } else alert("Ø§ÙƒØªØ¨ Ø´ÙŠØ¦Ù‹Ø§.");
  }

  function showMessage(){
    let msgs=[
      "Ø¥Ù†Øª Ù‚ÙˆÙŠ Ø­ØªÙ‰ Ù„Ùˆ Ù…Ø´ Ø­Ø§Ø³Ø³ ÙƒØ¯Ù‡ ğŸŒ¸",
      "ÙƒÙ„ Ø­Ø§Ø¬Ø© Ù‡ØªÙ‡Ø¯Ù‰ ÙˆØ§Ø­Ø¯Ø© ÙˆØ§Ø­Ø¯Ø© ğŸ’™",
      "Ø¥Ù†Øª Ù…Ø´ Ù„ÙˆØ­Ø¯Ùƒ ğŸŒ·",
      "Ù…Ù† Ø­Ù‚Ùƒ ØªØ·Ù„Ø¨ Ù…Ø³Ø§Ø¹Ø¯Ø© ğŸŒ¼"
    ];
    let div=document.getElementById("supportMessage");
    div.style.display="block";
    div.textContent=msgs[Math.floor(Math.random()*msgs.length)];
  }

  function quickExit(){ window.location.href="https://google.com"; }

  // Ø¸Ù‡ÙˆØ± Ø§Ù„Ø³Ø¨ÙˆØ±Ø© Ø¨Ø¹Ø¯ Ø§Ù„ÙƒØªØ§Ø¨Ø©
  document.getElementById("note").addEventListener("input", function(){
    if(this.value.trim().length > 5){
      document.getElementById("drawingBox").style.display="block";
    } else {
      document.getElementById("drawingBox").style.display="none";
    }
  });

  // Ø§Ù„Ø±Ø³Ù…
  const canvas=document.getElementById("drawingBoard");
  const ctx=canvas.getContext("2d");
  let drawing=false;

  canvas.addEventListener("mousedown",()=>drawing=true);
  canvas.addEventListener("mouseup",()=>drawing=false);
  canvas.addEventListener("mouseleave",()=>drawing=false);

  canvas.addEventListener("mousemove", function(e){
    if(!drawing) return;
    const rect=canvas.getBoundingClientRect();
    const x=e.clientX - rect.left;
    const y=e.clientY - rect.top;
    ctx.fillRect(x,y,2,2);
  });

  // Ù…Ø³Ø­ Ø§Ù„Ø³Ø¨ÙˆØ±Ø©
  function clearCanvas(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
  }
</script>

</body>
</html>
